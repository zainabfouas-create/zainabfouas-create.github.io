<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù‡Ø¯ÙŠØ© Ø§Ù„Ù‰ Ø²ÙŠÙ†Ø¨ - Ø­Ø¨ØŒ Ù…ÙˆØ³ÙŠÙ‚Ù‰ ÙˆØ«ÙŠÙ… Ø£Ø³ÙˆØ¯</title>
    
    <!-- ØªØ­Ù…ÙŠÙ„ Tailwind CSS -->
<script src="https://cdn.tailwindcss.com"></script>
    
    <!-- ØªØ­Ù…ÙŠÙ„ Ù…ÙƒØªØ¨Ø© Tone.js Ù„Ù„Ù…Ø¤Ø«Ø±Ø§Øª Ø§Ù„ØµÙˆØªÙŠØ© -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.min.js"></script>
    <style>
        /* Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø®Ø· Ù„ÙŠØªÙ†Ø§Ø³Ø¨ Ù…Ø¹ Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© */
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;800&family=Amiri:wght@400;700&display=swap');
        
        body {
            font-family: 'Tajawal', sans-serif;
            background-color: #000000; /* Ø®Ù„ÙÙŠØ© Ø³ÙˆØ¯Ø§Ø¡ Ø¹Ù…ÙŠÙ‚Ø© */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            overflow: hidden; 
            position: relative;
        }

        /* Ø­Ø§ÙˆÙŠØ© Ù…Ø·Ø± Ø§Ù„Ø£Ø­Ø±Ù */
        .letter-rain-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 0;
            pointer-events: none;
        }

        .falling-letter {
            position: absolute;
            font-family: 'Amiri', serif;
            color: #ff527c; /* Ù„ÙˆÙ† ÙˆØ±Ø¯ÙŠ Ù„Ù„Ø£Ø­Ø±Ù */
            opacity: 0.15; /* Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ÙˆØ¶ÙˆØ­ */
            animation: fall 15s linear infinite; /* Ø³Ø±Ø¹Ø© Ø§Ù„Ø³Ù‚ÙˆØ· */
        }

        @keyframes fall {
            0% {
                transform: translateY(-100px) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.15;
            }
            100% {
                transform: translateY(100vh) rotate(720deg); /* Ø¯ÙˆØ±Ø§Ù† Ù…Ø¹ Ø§Ù„Ø³Ù‚ÙˆØ· */
                opacity: 0;
            }
        }

        /* Ù†Ù…Ø· Ø§Ù„Ù‚Ù„ÙˆØ¨ Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ© */
        .heart-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 0;
            pointer-events: none;
        }

        .heart {
            position: absolute;
            color: #ff527c; 
            animation: floatHeart 10s linear infinite;
            opacity: 0;
        }

        @keyframes floatHeart {
            0% {
                transform: translateY(100vh) scale(0);
                opacity: 0;
            }
            10% {
                opacity: 0.8;
                transform: translateY(90vh) scale(1);
            }
            100% {
                transform: translateY(-10vh) scale(1.2);
                opacity: 0.1;
            }
        }

        /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© - ØªØ£Ø«ÙŠØ± Ø²Ø¬Ø§Ø¬ÙŠ (Glassmorphism) */
        .card {
            background-color: rgba(26, 26, 26, 0.7); /* Ø®Ù„ÙÙŠØ© Ø¯Ø§ÙƒÙ†Ø© Ø´ÙØ§ÙØ© */
            backdrop-filter: blur(10px); /* Ù…ÙØªØ§Ø­ Ø§Ù„ØªØ£Ø«ÙŠØ± Ø§Ù„Ø²Ø¬Ø§Ø¬ÙŠ */
            -webkit-backdrop-filter: blur(10px); /* Ø¯Ø¹Ù… Ù…ØªØµÙØ­Ø§Øª Ø§Ù„ÙˆÙŠØ¨ ÙƒÙŠØª */
            color: #e5e5e5;
            border-radius: 1.5rem;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.5); /* Ø¸Ù„ Ø¯Ø§ÙƒÙ† ÙˆØ¹Ù…ÙŠÙ‚ */
            max-width: 520px;
            width: 100%;
            padding: 40px;
            text-align: center;
            transition: all 0.5s ease-in-out;
            border: 1px solid rgba(255, 255, 255, 0.1); /* Ø­Ø¯ÙˆØ¯ Ø®ÙÙŠÙØ© */
            z-index: 10;
        }
        .fade-in {
            opacity: 0;
            animation: fadeIn 0.8s forwards;
        }
        @keyframes fadeIn {
            to { opacity: 1; }
        }
        .themed-image {
            width: 100%;
            max-height: 200px;
            object-fit: cover;
            margin: 20px auto;
            border-radius: 1rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
        }
        .pulse-once {
            animation: pulse-effect 0.8s ease-out;
        }
        @keyframes pulse-effect {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.02); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }
        /* ØªØµÙ…ÙŠÙ… Ø®Ø§Øµ Ù„Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…ØªØªØ§Ù„ÙŠØ© */
        .message-box {
            background-color: rgba(255, 255, 255, 0.05); /* Ø®Ù„ÙÙŠØ© Ø®ÙÙŠÙØ© Ù„Ù„Ø±Ø³Ø§Ø¦Ù„ */
            padding: 12px;
            border-radius: 12px;
            margin-bottom: 10px;
            text-align: right;
            border-left: 3px solid #ff527c;
        }
        .message-box.response {
            border-left: none;
            border-right: 3px solid #c3b1e1; /* Ù„ÙˆÙ† Ù…Ø®ØªÙ„Ù Ù„Ø±Ø¯ Ø²ÙŠÙ†Ø¨ */
            text-align: left;
        }
        /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± ØªØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡ÙŠ Ø¨ØªØµÙ…ÙŠÙ… ÙˆØ§Ø¶Ø­ ÙˆÙ…Ø´Ø±Ù‚ Ù„ØªØ¨Ø§ÙŠÙ† Ù…Ø¹ Ø§Ù„Ø«ÙŠÙ… Ø§Ù„Ø¯Ø§ÙƒÙ† */
        .btn-primary {
            background-color: #ff527c;
            color: white;
            font-weight: 700;
            padding: 14px 32px;
            border-radius: 9999px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 82, 124, 0.4);
            border: 2px solid #ff527c;
        }
        .btn-primary:hover {
            background-color: #e8486f;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 82, 124, 0.6);
        }
        .btn-secondary {
            background-color: #333;
            color: #e5e5e5;
            font-weight: 700;
            padding: 14px 32px;
            border-radius: 9999px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            border: 2px solid #555;
        }
        .btn-secondary:hover {
            background-color: #444;
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.4);
        }
        .amiri-font {
            font-family: 'Amiri', serif;
            line-height: 1.6;
        }
    </style>
</head>
<body>

    <!-- Ù…Ø´ØºÙ„ ÙŠÙˆØªÙŠÙˆØ¨ Ù…Ø®ÙÙŠ Ù„Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø§Ù„Ø®Ù„ÙÙŠØ© -->
    <div id="youtube-embed" style="position: absolute; width: 0; height: 0; overflow: hidden; opacity: 0;">
        <iframe id="bg-music-iframe" width="560" height="315" src="https://www.youtube.com/embed/b2vxSfbuA8o?autoplay=0&loop=1&playlist=b2vxSfbuA8o&controls=0&disablekb=1&modestbranding=1" 
                frameborder="0" allow="autoplay; encrypted-media" allowfullscreen>
        </iframe>
    </div>

    <!-- ØªÙ„Ù…ÙŠØ­ Ù„Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ ÙÙŠ Ø­Ø§Ù„ Ù„Ù… ØªØ¹Ù…Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ -->
    <!-- ØªÙ… Ø¥Ø²Ø§Ù„Ø© 'hidden' Ù„Ø¬Ø¹Ù„Ù‡Ø§ ØªØ¸Ù‡Ø± ÙˆØªØ®ØªÙÙŠ Ø¨ØªØ£Ø«ÙŠØ± Ø§Ù„ØªÙ„Ø§Ø´ÙŠ -->
    <div id="music-hint" class="fixed bottom-4 right-4 text-xs text-gray-500 bg-gray-900 p-2 rounded-lg z-50 transition duration-500 opacity-100">
        ğŸ¶ **Ù‡Ø§Ù…:** Ø§Ø¶ØºØ·ÙŠ Ø¹Ù„Ù‰ Ø£ÙŠ Ø²Ø± Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ ÙˆØ§Ù„Ù…Ø¤Ø«Ø±Ø§Øª Ø§Ù„ØµÙˆØªÙŠØ©!
    </div>

    <div class="letter-rain-container" id="letter-rain-container"></div>

    <div id="app" class="card">
        <!-- Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ -->
        <h1 id="loading-text" class="text-2xl text-pink-500 font-bold fade-in">
            Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙØŒ ÙŠØ§ Ø²ÙŠÙ†Ø¨! ğŸŒ¹
            <br>
            Ù„Ø­Ø¸Ø© Ù…Ù† ÙØ¶Ù„Ùƒ... â³
        </h1>

        <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
        <div id="content" class="hidden">
            <!-- Ø³ÙŠØªÙ… Ø­Ù‚Ù† Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ Ù‡Ù†Ø§ -->
        </div>
    </div>

    <script>
        // Ø¥Ø¹Ø¯Ø§Ø¯ Tone.js Ù„Ù„ØµÙˆØª
        const synth = new Tone.PolySynth(Tone.Synth).toDestination();
        let isAudioInitialized = false; // Ø¹Ù„Ø§Ù…Ø© Ù„Ø¶Ù…Ø§Ù† ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·

        // ** Ø¯Ø§Ù„Ø© Ø§Ù„ØªÙ…Ù‡ÙŠØ¯ Ø§Ù„ØµÙˆØªÙŠ Ø§Ù„Ø´Ø§Ù…Ù„Ø© (Ø§Ù„Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ø¬Ø°Ø±ÙŠ Ù„Ù…Ø´ÙƒÙ„Ø© Ø§Ù„ØµÙˆØª) **
        function initializeAudioContext() {
            if (isAudioInitialized) return;

            // 1. Ø¨Ø¯Ø¡ ØªØ´ØºÙŠÙ„ Tone.js (Ù…Ø¤Ø«Ø±Ø§Øª Ø§Ù„Ù†Ù‚Ø±Ø§Øª)
            if (Tone.context.state !== 'running') {
                Tone.start();
            }

            // 2. Ø¨Ø¯Ø¡ ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø§Ù„Ø®Ù„ÙÙŠØ©
            const youtubeIframe = document.getElementById('bg-music-iframe');
            if (youtubeIframe && youtubeIframe.src.includes('autoplay=0')) {
                // Ø§Ø³ØªØ¨Ø¯Ø§Ù„ autoplay=0 Ø¨Ù€ autoplay=1 Ù„ÙØ±Ø¶ ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
                const newSrc = youtubeIframe.src.replace('autoplay=0', 'autoplay=1');
                youtubeIframe.src = newSrc;
            }

            // Ø¥Ø®ÙØ§Ø¡ ØªÙ„Ù…ÙŠØ­ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰
            const musicHint = document.getElementById('music-hint');
            musicHint.classList.remove('opacity-100');
            musicHint.classList.add('opacity-0');
            setTimeout(() => musicHint.classList.add('hidden'), 500);
            
            isAudioInitialized = true;
        }


        const clickSound = () => {
            // ÙŠØªÙ… Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙˆØª ÙÙŠ ÙƒÙ„ Ù†Ù‚Ø±Ø© (ØªÙ†ÙØ° Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·)
            initializeAudioContext(); 
            
            // ØªØ´ØºÙŠÙ„ ØµÙˆØª "Ù†Ù‚Ø±Ø©" Ù„Ø·ÙŠÙ
            synth.triggerAttackRelease("C4", "C5", "16n");
        };

        // Ø¯Ø§Ù„Ø© Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„ØªØ£Ø®ÙŠØ± Ø§Ù„ØªÙ†ÙÙŠØ°
        const delay = ms => new Promise(resolve => setTimeout(resolve, ms));

        // Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ÙÙŠ Ø§Ù„ØµÙØ­Ø©
        const loadingText = document.getElementById('loading-text');
        const contentDiv = document.getElementById('content');
        const letterRainContainer = document.getElementById('letter-rain-container');

        // Ù…Ø³Ø§Ø±Ø§Øª Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…Ø­Ø¯Ø«Ø©
        const imagePath1 = 'https://s.gbl.ws/assets/images/image.png-dd8e3cb3-ff34-40b4-99f8-accb7e9093c8';
        const imagePath2 = 'https://s.gbl.ws/assets/images/image.png-d521f5a8-7248-4bb5-8bae-ff7b2323ed25';
        const imagePathFinal = 'https://g.top4top.io/p_3620fibuq0.jpeg'; 

        // Ø­Ø§Ù„Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        let state = 0; 

        // Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„Ø© Ø¹Ù† Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø­ØªÙˆÙ‰
        function renderContent(htmlContent, pulse = true) {
            contentDiv.innerHTML = htmlContent;
            contentDiv.classList.remove('hidden');
            if (pulse) {
                contentDiv.classList.add('pulse-once');
                contentDiv.addEventListener('animationend', () => contentDiv.classList.remove('pulse-once'), { once: true });
            }
        }

        // --- Ù…Ø´Ø§Ù‡Ø¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ø®ØªÙ„ÙØ© ---

        // Ø§Ù„Ù…Ø´Ù‡Ø¯ 1: Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§Ø³Ù… 
        function scene1_isZainab() {
            const html = `
                <div class="fade-in">
                    <img src="${imagePath1}" alt="ØµÙˆØ±Ø© ØªÙˆØ¶ÙŠØ­ÙŠØ© Ù„Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰" class="themed-image mx-auto">
                    <h2 class="text-3xl font-bold text-gray-100 mb-6 mt-4">Ù‡Ù„ Ø£Ù†ØªÙ Ø²ÙŠÙ†Ø¨ØŸ ğŸ¤”</h2>
                    <div class="flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4 sm:space-x-reverse">
                        <button onclick="handleZainabResponse(true); clickSound();" class="btn-primary">
                            Ù†Ø¹Ù…ØŒ Ø£Ù†Ø§ Ù‡ÙŠ! âœ¨
                        </button>
                        <button onclick="handleZainabResponse(false); clickSound();" class="btn-secondary">
                            Ù„Ø§ (No) âŒ
                        </button>
                    </div>
                </div>
            `;
            renderContent(html);
        }

        // Ø§Ù„Ù…Ø´Ù‡Ø¯ 2: Ø³Ø¤Ø§Ù„ Ø§Ù„Ø­Ø¨ 
        function scene2_doYouLoveMe() {
            state = 2;
            const html = `
                <div class="fade-in">
                    <img src="${imagePath1}" alt="ØµÙˆØ±Ø© Ø­Ø¨" class="themed-image mx-auto">
                    <h2 class="text-3xl font-bold text-gray-100 mb-6 mt-4">ÙŠØ§ Ø²ÙŠÙ†Ø¨ØŒ Ù‡Ù„ ØªØ­Ø¨ÙŠÙ†ÙŠØŸ ğŸ¥º</h2>
                    <div class="flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4 sm:space-x-reverse">
                        <button onclick="handleLoveResponse(true); clickSound();" class="btn-primary">
                            Ù†Ø¹Ù…ØŒ Ø·Ø¨Ø¹Ø§Ù‹! ğŸ¥°
                        </button>
                        <button onclick="handleLoveResponse(false); clickSound();" class="btn-secondary">
                            Ù„Ø§ (No) ğŸ˜­
                        </button>
                    </div>
                </div>
            `;
            renderContent(html);
        }

        // Ø§Ù„Ù…Ø´Ù‡Ø¯ 3: Ø§Ù„ØªÙØ§Ø¹Ù„Ø§Øª Ø§Ù„Ù…ØªØ³Ù„Ø³Ù„Ø© (Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©)
        function scene3_conversation() {
            state = 3;
            contentDiv.dataset.conversationStep = 0; 
            
            const html = `
                <div class="fade-in">
                    <img src="${imagePath2}" alt="ØµÙˆØ±Ø© ØªØ¹Ø¨ÙŠØ±ÙŠØ© Ù„Ù„Ù…Ø­Ø§Ø¯Ø«Ø©" class="themed-image mx-auto">
                    <h2 class="text-3xl font-bold text-gray-100 mb-6 mt-4">Ù„Ø­Ø¸Ø© Ø­Ù‚ÙŠÙ‚Ø©... ğŸ’¬</h2>
                    
                    <div id="chat-sequence" class="mb-8 p-4 bg-black/30 rounded-xl overflow-y-auto max-h-60">
                        <!-- Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ Ø¨Ø§Ù„ØªØ³Ù„Ø³Ù„ -->
                    </div>

                    <button id="next-conv-btn" onclick="handleNextConvClick(); clickSound();" class="btn-primary w-full">
                        (Ø§Ø¨Ø¯Ø£ÙŠ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©) â¡ï¸
                    </button>
                </div>
            `;
            renderContent(html);
        }
        
        // Ø§Ù„ØªÙØ§Ø¹Ù„ Ø§Ù„Ù…ØªØ³Ù„Ø³Ù„ Ù„Ù„Ù…Ø­Ø§Ø¯Ø«Ø©
        const chatSequence = [
            { sender: 'ÙØ¤Ø§Ø¯', text: 'Ø´Ùˆ Ø­Ø§Ø³ Ù…Ø§ ØªØ­Ø¨ÙŠÙ†ÙŠ ğŸ¤”' },
            { sender: 'Ø²ÙŠÙ†Ø¨', text: 'Ù„Ø§ ÙˆØ§Ù„Ù„Ù‡ Ø£Ø­Ø¨Ùƒ â¤ï¸â€ğŸ©¹', style: 'response' },
            { sender: 'ÙØ¤Ø§Ø¯', text: 'Ù…Ù…Ù…Ù…Ù…... ğŸ¤¨' },
            { sender: 'Ø²ÙŠÙ†Ø¨', text: 'Ø¨ÙˆØ³Ø© ğŸ’‹', style: 'response' }, 
        ];

        function continueConversation() {
            const chatBox = document.getElementById('chat-sequence');
            const nextButton = document.getElementById('next-conv-btn');
            let step = parseInt(contentDiv.dataset.conversationStep || 0);
            
            if (!nextButton || step >= chatSequence.length) {
                return;
            }

            const message = chatSequence[step];
            
            const msgElement = document.createElement('div');
            msgElement.className = `message-box fade-in ${message.style || ''}`;
            const senderColor = message.sender === 'ÙØ¤Ø§Ø¯' ? 'text-pink-400' : 'text-purple-400';
            msgElement.innerHTML = `<span class="font-bold ${senderColor}">${message.sender}:</span> ${message.text}`;
            
            chatBox.appendChild(msgElement);
            chatBox.scrollTop = chatBox.scrollHeight; 
            
            contentDiv.dataset.conversationStep = step + 1;
            
            if (step === chatSequence.length - 1) {
                // Ø¢Ø®Ø± Ø±Ø³Ø§Ù„Ø©
                nextButton.innerText = 'Ø§Ù†ØªÙ‚Ù„ Ù„Ø¥Ø¹Ù„Ø§Ù† Ø§Ù„Ø­Ø¨ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ! ğŸš€';
            } else {
                nextButton.innerText = 'Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©...';
            }
        }
        
        // ** Ø¯Ø§Ù„Ø© Ù…Ø¹Ø§Ù„Ø¬Ø© Ù†Ù‚Ø±Ø© Ø²Ø± Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© **
        function handleNextConvClick() {
            const nextButton = document.getElementById('next-conv-btn');
            if (!nextButton) return;

            if (nextButton.innerText.includes('Ø§Ù†ØªÙ‚Ù„ Ù„Ø¥Ø¹Ù„Ø§Ù† Ø§Ù„Ø­Ø¨ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ')) {
                scene7_finalDeclaration();
            } else {
                continueConversation();
            }
        }

        // Ø§Ù„Ù…Ø´Ù‡Ø¯ 7: Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø¹Ù† Ø§Ù„Ø­Ø¨
        function scene7_finalDeclaration() {
            state = 7;
            const html = `
                <div class="fade-in text-center">
                    <img src="${imagePathFinal}" alt="ØµÙˆØ±Ø© Ø¥Ø¹Ù„Ø§Ù† Ø§Ù„Ø­Ø¨ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ" class="themed-image mx-auto">

                    <p class="text-xl text-gray-400 my-4">**ØªØ±Ø§ Ø£Ø¯Ø±ÙŠ ØªØ­Ø¨ÙŠÙ†ÙŠ ÙˆØªÙ…ÙˆØªÙŠÙ† Ø¹Ù„ÙŠÙ‡** ğŸ˜’</p>

                    <h1 class="text-4xl font-extrabold text-pink-600 my-6">
                        Ù„Ø£Ù†... ğŸ’–
                    </h1>

                    <h2 class="text-3xl md:text-5xl amiri-font font-extrabold text-purple-400 leading-snug">
                        Ø£Ù†Ø§ Ø£Ø­Ø¨ÙƒÙ <span class="text-red-500">Ø­Ø¨Ù‹Ø§</span> ÙŠÙ…Ù„Ø£ Ø§Ù„ÙƒÙˆÙ†... Ø£Ø­Ø¨ÙƒÙ Ø¬Ø¯Ù‹Ø§ Ø¬Ø¯Ù‹Ø§!!! ğŸ¥¹ğŸ«¶
                    </h2>

                    <p class="text-2xl font-bold text-gray-100 mt-8 mb-12">
                        Ø£Ø­Ø¨ÙƒÙ ÙŠØ§ Ø²ÙŠÙ†Ø¨ â¤ï¸
                    </p>

                    <hr class="my-6 border-gray-700">

                    <p class="text-sm text-gray-500 mt-6">
                        Ù‡Ø§ÙŠ Ø§Ù„Ù‡Ø¯ÙŠØ© Ù…Ù† ØªØ¤Ø§Ù… Ø±ÙˆØ­Ø¬ ÙˆØ­Ø¨ÙŠØ¨Ø¬ ÙØ¤Ø§Ø¯Ø¬ ğŸ¥¹
                    </p>
                </div>
            `;
            renderContent(html);
        }

        // --- Ù…Ø¹Ø§Ù„Ø¬Ø§Øª Ø§Ù„ØªÙØ§Ø¹Ù„ ---

        // Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø³Ø¤Ø§Ù„ "Ù‡Ù„ Ø£Ù†ØªÙ Ø²ÙŠÙ†Ø¨ØŸ"
        function handleZainabResponse(isZainab) {
            if (isZainab) {
                scene2_doYouLoveMe();
            } else {
                const surpriseHtml = `
                    <div class="fade-in">
                        <img src="${imagePath1}" alt="ØµÙˆØ±Ø© Ù…ÙØ§Ø¬Ø£Ø©" class="themed-image mx-auto opacity-70">
                        <h2 class="text-3xl font-bold text-gray-100 mb-6 mt-4">Ø¹ÙÙˆØ§Ù‹! Ù‡Ù„ Ø£Ù†ØªÙ Ù…ØªØ£ÙƒØ¯Ø© Ù…Ù† Ø£Ù†ÙƒÙ Ù„Ø³ØªÙ Ø²ÙŠÙ†Ø¨ØŸ ğŸ¤”</h2>
                        <button onclick="scene2_doYouLoveMe(); clickSound();" class="btn-primary mt-4">
                            ØªØ±Ø§Ø¬Ø¹Øª! Ø£Ù†Ø§ Ø²ÙŠÙ†Ø¨. ğŸ˜‡
                        </button>
                    </div>
                `;
                renderContent(surpriseHtml);
            }
        }

        // Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø³Ø¤Ø§Ù„ "Ù‡Ù„ ØªØ­Ø¨ÙŠÙ†ÙŠØŸ"
        async function handleLoveResponse(lovesMe) {
            if (lovesMe) {
                // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ø§Ù„Ù…ØªØ³Ù„Ø³Ù„Ø©
                scene3_conversation(); 
            } else {
                await persuadeLoop();
            }
        }

        async function persuadeLoop() {
            clickSound();
            contentDiv.innerHTML = `
                <div class="fade-in">
                    <img src="https://picsum.photos/400/200?random=5" alt="ØµÙˆØ±Ø© ÙˆØ¬Ù‡ ØºØ§Ø¶Ø¨" class="themed-image mx-auto">
                    <h2 class="text-3xl font-bold text-gray-100 mb-6 mt-4">Ù‡Ø°Ù‡ Ø¥Ø¬Ø§Ø¨Ø© ØºÙŠØ± Ù…Ù‚Ø¨ÙˆÙ„Ø©! ğŸ˜¡</h2>
                </div>
            `;
            await delay(1500);

            clickSound();
            contentDiv.innerHTML = `
                <div class="fade-in">
                    <img src="https://picsum.photos/400/200?random=6" alt="ØµÙˆØ±Ø© ÙˆØ¬Ù‡ Ø¨Ø§Ùƒ" class="themed-image mx-auto">
                    <h2 class="text-3xl font-bold text-gray-100 mb-6 mt-4">Ø²ÙŠÙ†Ø¨ØŒ Ù‡Ù„ Ø£Ù†ØªÙ Ù…ØªØ£ÙƒØ¯Ø© Ù…Ù† Ø¥Ø¬Ø§Ø¨ØªÙƒÙØŸ ğŸ¥º</h2>
                </div>
            `;
            await delay(1500);

            clickSound();
            contentDiv.innerHTML = `
                <div class="fade-in">
                    <img src="https://picsum.photos/400/200?random=7" alt="ØµÙˆØ±Ø© ÙˆØ¬Ù‡ Ù…ØªÙˆØ³Ù„" class="themed-image mx-auto">
                    <h2 class="text-3xl font-bold text-gray-100 mb-6 mt-4">Ø£ØªÙˆØ³Ù„ Ø¥Ù„ÙŠÙƒÙØŒ Ø£Ø¹ÙŠØ¯ÙŠ Ø§Ù„Ù†Ø¸Ø±! ğŸ™</h2>
                    <button onclick="scene7_finalDeclaration(); clickSound();" class="btn-primary mt-4">
                        Ø­Ø³Ù†Ø§Ù‹ØŒ Ù†Ø¹Ù… Ø£Ø­Ø¨Ùƒ! (Ø§Ø¶ØºØ·ÙŠ Ù‡Ù†Ø§) â¤ï¸
                    </button>
                </div>
            `;
        }
        
        // Functions for background effects (same as before)
        function createHearts() {
            const container = document.createElement('div');
            container.className = 'heart-container';
            document.body.prepend(container);

            for (let i = 0; i < 30; i++) {
                const heart = document.createElement('div');
                heart.className = 'heart';
                heart.innerHTML = 'ğŸ’–'; 
                
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.animationDelay = Math.random() * 10 + 's';
                heart.style.animationDuration = (8 + Math.random() * 7) + 's';
                heart.style.fontSize = (16 + Math.random() * 14) + 'px';
                container.appendChild(heart);
            }
        }

        function createFallingLetters() {
            const letters = ['Z', 'F'];
            const numberOfLetters = 50; 

            for (let i = 0; i < numberOfLetters; i++) {
                const letter = document.createElement('div');
                letter.className = 'falling-letter';
                letter.innerHTML = letters[Math.floor(Math.random() * letters.length)];
                
                letter.style.left = Math.random() * 100 + 'vw';
                letter.style.fontSize = (20 + Math.random() * 30) + 'px'; 
                letter.style.animationDelay = Math.random() * 15 + 's';
                letter.style.animationDuration = (10 + Math.random() * 10) + 's';
                letterRainContainer.appendChild(letter);
            }
        }

        // --- ÙˆØ¸ÙŠÙØ© Ø¨Ø¯Ø¡ ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…ÙˆÙ‚Ø¹ ---
        async function startApp() {
            createHearts(); 
            createFallingLetters(); 
            
            // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙˆØª ÙˆØ§Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ø¢Ù† ÙŠØ¹ØªÙ…Ø¯ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ø¹Ù„Ù‰ Ù†Ù‚Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            
            loadingText.classList.add('fade-in');

            await delay(2000);

            loadingText.classList.remove('fade-in');
            loadingText.classList.add('hidden');
            scene1_isZainab();
        }

        // Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨Ù…Ø¬Ø±Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        window.onload = startApp;
    </script>
</body>
</html>

